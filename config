# Шрифт
font pango: Roboto Condensed 8

# Цвветовая палитра
set $red #AC4344
set $green #769070
set $blue #348899
set $white #f2ebc7
set $gray #979c9c
set $custom #4C5356
set $black #21252E
set $dark #16100b

# Клавиша windows
set $mod Mod4

# Mouse+$mod для перемещения плавающего окна
floating_modifier $mod

# Терминал
bindsym $mod+Return exec --no-startup-id urxvt
bindsym $mod+Shift+Return exec --no-startup-id terminology

# Закрыть окно mod + q
bindcode $mod+24 kill

# launcher mod + d
bindcode $mod+40 exec --no-startup-id i3-dmenu-desktop

#bindcode $mod+40 exec --no-startup-id dmenu_run
#bindsym $mod+Ctrl+d exec --no-startup-id rofi

# Некоторые переменные
# l
set $up 46
# k
set $down 45
# j
set $left 44
# ;
set $right 47

# Путь до папки с конфигом
set $home /home/rain/.config/i3

# Система
# mod + ctrl + r
bindcode $mod+Ctrl+27 exec shutdown -r now
# mod + ctrl + o
bindcode $mod+Ctrl+32 exec shutdown -h now
# Перечитать файл конфига
# Mod + shift + c
bindcode $mod+Shift+54 reload
# Перезапуск wm. (Сохраняет лэйаут)
# Mod + shift + r
bindcode $mod+Shift+27 restart
# Выход (из X сессии)
# Mod + shift + e
bindcode $mod+Shift+26 exec "i3-nagbar -t warning -m 'Вы действительно хотите выйти?' -b 'Выход' 'i3-msg exit'"

# Раскладки
bindsym $mod+Ctrl+semicolon exec --no-startup-id $home/bin/set-dvorak.sh
bindsym $mod+Ctrl+s exec --no-startup-id $home/bin/set-default.sh

# фокус стрелками
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Фокус
bindcode $mod+$left focus left
bindcode $mod+$down focus down
bindcode $mod+$up focus up
bindcode $mod+$right focus right

# Перемещение окон стрелками
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Перемещение окон
bindcode $mod+Shift+$left move left
bindcode $mod+Shift+$down move down
bindcode $mod+Shift+$up move up
bindcode $mod+Shift+$right move right

# Разбить окно по горизонтали Mod + h
bindcode $mod+43 split h

# Разбить окно по вертикали Mod + v
bindcode $mod+55 split v

# Окно в фулскрин Mod + f
bindcode $mod+41 fullscreen

# Лайаут stacked, tabbed, toggle split
# Mod + s
bindcode $mod+39 layout stacking
# Mod + w
bindcode $mod+25 layout tabbed
# Mod + e
bindcode $mod+26 layout toggle split

# tiling / floating
bindsym $mod+Shift+space floating toggle

# фокус между tiling / floating
bindsym $mod+space focus mode_toggle

# Фокус родителя
# Mod + a
bindcode $mod+38 focus parent

# Фокус детей
#bindsym $mod+d focus child

# изменение бордюра
# Mod + t
bindcode $mod+28 border normal
# Mod + y
bindcode $mod+29 border 1pixel
# Mod + u
bindcode $mod+30 border none

# Переключение по воркспейсам
# Mod + z
bindcode $mod+52 workspace prev
# Mod + x
bindcode $mod+53 workspace next
# Mod + c
bindcode $mod+54 workspace back_and_forth

# Обои
# Mod + n
bindcode $mod+57 exec nitrogen --sort=time
# Mod + b
bindcode $mod+56 exec --no-startup-id chromium

################################################################################
# Функциональные клавиши

# скриншотим
bindsym $mod+F3 exec scrot

# яркость
bindsym $mod+F4 exec --no-startup-id $home/bin/br-down.sh
#bindsym XF86MonBrightnessDown exec --no-startup-id $home/bin/br-down.sh
bindsym $mod+F5 exec --no-startup-id $home/bin/br-up.sh
#bindsym XF86MonBrightnessUp exec --no-startup-id $home/i3/bin/br-up.sh

# громкость
bindsym $mod+F7 exec --no-startup-id $home/bin/vol-down.sh
bindsym $mod+F8 exec --no-startup-id $home/bin/vol-up.sh

# плейер
bindsym $mod+F9 exec --no-startup-id mpc toggle
bindsym $mod+F10 exec --no-startup-id mpc stop
bindsym $mod+F11 exec --no-startup-id mpc prev
bindsym $mod+F12 exec --no-startup-id mpc next


# Настройка окон
for_window [class="(i?)ktorrent"] floating enable
for_window [class="Nitrogen"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [class="xpad"] floating enable

################################################################################
# Раскидываем по воркспейсам

assign [class="(?i)ktorrent"] → $WS2

assign [class="(?i)firefox"] → $WS3
assign [class="(?i)chromium"] → $WS3

assign [class="(?i)smplayer"] $WS4

assign [class="(?i)atom"] → $WS5

assign [class="(?i)ristretto"] → $WS6
assign [class="(?i)gwenview"] → $WS6
assign [class="(?i)okular"] → $WS6
assign [class="Viewnior"] $ws6

assign [class="(?i)libreoffice"] → $WS7

assign [class="(?i)gimp"] → $WS8
assign [class="(?i)inkscape"] → $WS8
assign [class="(?i)blender"] → $WS8

assign [class="(?i)nitrogen"] → $WS10

# окно в scratchpad Mod + shift + -
bindcode $mod+Shift+20 move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# Mod + -
bindcode $mod+20 scratchpad show

# gaps
set $default_gaps_inner 6
set $default_gaps_outer 10

gaps inner $default_gaps_inner
gaps outer $default_gaps_outer

# воркспейсы
set $WS1 1:
set $WS2 2:
set $WS3 3:
set $WS4 4:
set $WS5 5:
set $WS6 6:
set $WS7 7:
set $WS8 8:
set $WS9 9:
set $WS10 10:

# Переключение по воркспейсам
# Mod + 1..9, 0
bindcode $mod+10 workspace $WS1
bindcode $mod+11 workspace $WS2
bindcode $mod+12 workspace $WS3
bindcode $mod+13 workspace $WS4
bindcode $mod+14 workspace $WS5
bindcode $mod+15 workspace $WS6
bindcode $mod+16 workspace $WS7
bindcode $mod+17 workspace $WS8
bindcode $mod+18 workspace $WS9
bindcode $mod+19 workspace $WS10

# Перемещение в воркспейс
# Mod + shift + 1..9, 0
bindcode $mod+Shift+10 move container to workspace $WS1
bindcode $mod+Shift+11 move container to workspace $WS2
bindcode $mod+Shift+12 move container to workspace $WS3
bindcode $mod+Shift+13 move container to workspace $WS4
bindcode $mod+Shift+14 move container to workspace $WS5
bindcode $mod+Shift+15 move container to workspace $WS6
bindcode $mod+Shift+16 move container to workspace $WS7
bindcode $mod+Shift+17 move container to workspace $WS8
bindcode $mod+Shift+18 move container to workspace $WS9
bindcode $mod+Shift+19 move container to workspace $WS10

# Ресайз окна (Можно юзать мышь)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode
        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindcode $left       resize shrink width 10 px or 10 ppt
        bindcode $down       resize grow height 10 px or 10 ppt
        bindcode $up         resize shrink height 10 px or 10 ppt
        bindcode $right      resize grow width 10 px or 10 pptbindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 -- +10% && killall -SIGUSR1 i3status

        # same bindings, but for the arrow keys
        bindsym Left        resize shrink width 10 px or 10 ppt
        bindsym Down        resize grow height 10 px or 10 ppt
        bindsym Up          resize shrink height 10 px or 10 ppt
        bindsym Right       resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Mod + shift + r
bindcode $mod+27 mode "resize"

# Поребрик =)
new_window pixel 1
new_float pixel 0

# Красим окна
# class                 border  backgr. text    indicator
client.focused          $black $black $white $blue
client.focused_inactive $gray $gray $black $black
client.unfocused        $gray $gray $black $black
client.urgent           $white $white $black $red
client.placeholder      $black $black $white $black

# "Автозапуск"
exec --no-startup-id $home/bin/autostart.sh

bar {
    font pango: Roboto Condensed 9
    #font pango:Ubuntu 9
    status_command i3status -c $home/i3status
    position top
    workspace_buttons yes
    # tray
    tray_output LVDS1
    tray_padding 1
    separator_symbol ""
    colors {
        background $black
        statusline $white
        separator  $custom

        # ws               border  bg      text
        focused_workspace  $green  $green  $white
        active_workspace   $blue   $blue   $white
        inactive_workspace $custom $custom $white
        urgent_workspace   $red    $red    $white
    }
}
